/////////System() appraoch to R-SliM integration, as suggested by Bem /////////

//this follows the liveplotting recipe from the slim manual, shown below in the commented out region////

//initialize() {
 //initializeMutationRate(1e-7);
 //initializeMutationType("m1", 0.5, "f", 0.0);
// //initializeGenomicElement(g1, 0, 99999);
 ////initializeRecombinationRate(1e-8//);////////

//if (fileExists("/usr/bin/Rscript")//)
 //defineConstant("RSCRIPT", "/usr/b//in/Rscript");
//else if (fileExists("/usr/local/bi//n/Rscript"))
 //defineConstant("RSCRIPT", "/usr/local/bin/Rscript");
//els//e
 //stop("Couldn't find R//script.");
//}// ////

////1 {
////sim.addSubpop("p1", 5000);
////sim.setValue("fixed", NULL)//////

 //defineConstant("pngPath", writeT//empFile("plot_", ".png", ""))//;

// If we're running in SLiMgui, open a plot wind//ow
//if (exists("slimgui"))
 //slimgui.openDocu//ment(pngPath);
////}
////50000 late() { sim.outputFixedMutations(); //////////////////}

//1:// {
//if// (sim.generation % 10 == 0)
 ////{
 ////count = sim.substitutions.size();
 //sim.setValue("fixed", c(sim.getValue("fixed"), count));
//}

//if (sim.generation % 1000 != 0)
// return;

// y = sim.getValue("fixed");

// rstr = paste('{',
// 'x <- (1:' + size(y) + ') * 10',
// 'y <- c(' + paste(y, sep=", ") + ')',
// 'png(width=4, height=4, units="in", res=72, file="' + pngPath + '")',
// 'par(mar=c(4.0, 4.0, 1.5, 1.5))',
// 'plot(x=x, y=y, xlim=c(0, 50000), ylim=c(0, 500), type="l",',
// 'xlab="Generation", ylab="Fixed mutations", cex.axis=0.95,',
// 'cex.lab=1.2, mgp=c(2.5, 0.7, 0), col="red", lwd=2,',
// 'xaxp=c(0, 50000, 2))',
// 'box()',
// 'dev.off()',
// '}', sep="\n");

// scriptPath = writeTempFile("plot_", ".R", rstr);
//system(RSCRIPT, args=scriptPath);
//deleteFile(scriptPath);
//}


//okay, the code above is for control purposes, cause I can always uncomment that block in SLiMgui
//now for the legit stuff
